document.body.innerHTML+="<canvas id='canv' oncontextmenu='return false;'></canvas>";var link=document.createElement("link");link.href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";link.rel="icon";link.type="image/x-icon";document.getElementsByTagName("head")[0].appendChild(link);document.body.style.setProperty("margin","0px");document.documentElement.style.setProperty("margin","0px");document.documentElement.style.setProperty("overflow","hidden");document.getElementById("canv").addEventListener("mousemove",mouseMove);document.getElementById("canv").addEventListener("mousedown",mouseDown);document.getElementById("canv").addEventListener("mouseup",mouseUp);document.getElementById("canv").addEventListener("mousewheel",mouseWheel);document.title="PS";let o={};o.width=0;o.height=0;o.cameraCenterX=0;o.cameraCenterY=0;o.isMouseDown=false;o.lastMouseX=0;o.lastMouseY=0;o.cameraZoom=1;o.fillColor="lightgray";o.millisecondsBetweenFrames=33;o.secondsBetweenFrames=1/o.millisecondsBetweenFrames;let c;let canvas;o.toWorldSpace=function(screenX,screenY){let x=screenX-(o.width/2-o.cameraCenterX);let y=screenY-(o.height/2-o.cameraCenterY);x/=o.cameraZoom;y/=o.cameraZoom;return[x,y]};o.toScreenSpace=function(worldX,worldY){let x=worldX*o.cameraZoom;let y=worldY*o.cameraZoom;x+=o.width/2-o.cameraCenterX;y+=o.height/2-o.cameraCenterY;return[x,y]};function initialBoot(){canvas=document.getElementById("canv");c=canvas.getContext("2d");c.b=function(){c.beginPath();return this};c.m=function(x,y){c.moveTo(x,y);return this};c.l=function(x,y){c.lineTo(x,y);return this};c.s=function(){c.stroke();return this};c.st=function(style){c.strokeStyle=style;return this};c.fi=function(style){c.fillStyle=style;return this};c.fo=function(font){c.font=font;return this};c.text=function(text,x,y){c.fillText(text,x,y);return this};if(typeof firstUpdate==="function")firstUpdate(o);if(typeof o.tickOnce!=="undefined"&&o.tickOnce)console.log("Ticking only once.");else{setInterval(tick,o.millisecondsBetweenFrames)}}function tick(){var currentTime=new Date;var now=currentTime.getTime();update();drawCanvas()}function update(){o.width=window.innerWidth;o.height=window.innerHeight;canvas.width=o.width;canvas.height=o.height;if(typeof customUpdate==="function"){customUpdate(o)}drawCanvas()}function drawCanvas(){c.fillStyle=o.fillColor;c.fillRect(0,0,canvas.width,canvas.height);if(o.drawGrid){let ulx,uly;[ulx,uly]=o.toWorldSpace(0,0);let lrx,lry;[lrx,lry]=o.toWorldSpace(c.canvas.width,c.canvas.height);let startX,startY,stopX,stopY;let base=10;let min=Math.min(lrx-ulx,lry-uly);let step=Math.log10(min)/Math.log10(base);step=Math.floor(step);step=Math.pow(base,step);startX=parseInt((ulx-step)/step)*step;stopX=lrx;startY=parseInt((uly-step)/step)*step;stopY=lry;for(let x=startX;x<=stopX;x+=step){let tx,ty,t2;[tx,ty]=o.toScreenSpace(x,startY);[tx,t2]=o.toScreenSpace(x,stopY);c.strokeStyle="gray";if(x==0)c.strokeStyle="green";c.beginPath();c.moveTo(tx,ty);c.lineTo(tx,t2);c.stroke();c.fillStyle="white";c.fillText(x,tx+20,20)}for(let y=startY;y<=stopY;y+=step){let tx,ty,tx2;[tx,ty]=o.toScreenSpace(startX,y);[tx2,ty]=o.toScreenSpace(stopX,y);c.strokeStyle="gray";if(y==0)c.strokeStyle="red";c.beginPath();c.moveTo(tx,ty);c.lineTo(tx2,ty);c.stroke();c.fillStyle="white";c.fillText(-y,20,ty+20)}}c.save();c.translate(o.width/2-o.cameraCenterX,o.height/2-o.cameraCenterY);c.scale(o.cameraZoom,-o.cameraZoom);if(typeof customDraw==="function"){customDraw(c,o)}c.restore();if(typeof customUI==="function"){customUI(c,o)}}function mouseMove(e){if(noEvents())return;let currentMouseX=e.clientX;let currentMouseY=e.clientY;if(o.isMouseDown){let diffX=currentMouseX-o.lastMouseX;let diffY=currentMouseY-o.lastMouseY;o.cameraCenterX-=diffX;o.cameraCenterY-=diffY}o.lastMouseX=e.clientX;o.lastMouseY=e.clientY}function mouseDown(e){if(noEvents())return;let currentMouseX=e.clientX;let currentMouseY=e.clientY;o.lastMouseX=e.clientX;o.lastMouseY=e.clientY;o.isMouseDown=true}function mouseUp(e){if(noEvents())return;let currentMouseX=e.clientX;let currentMouseY=e.clientY;o.lastMouseX=e.clientX;o.lastMouseY=e.clientY;o.isMouseDown=false}function mouseWheel(e){if(noEvents())return;let x=e.clientX-(o.width/2-o.cameraCenterX);let y=e.clientY-(o.height/2-o.cameraCenterY);x/=o.cameraZoom;y/=o.cameraZoom;if(e.wheelDelta>0){o.cameraZoom*=1.1}else if(e.wheelDelta<0){o.cameraZoom/=1.1}if(o.cameraZoom>100){o.cameraZoom=100}if(o.cameraZoom<.1){o.cameraZoom=.1}let x2=e.clientX-(o.width/2-o.cameraCenterX);let y2=e.clientY-(o.height/2-o.cameraCenterY);x2/=o.cameraZoom;y2/=o.cameraZoom;o.cameraCenterX-=x2-x;o.cameraCenterY-=y2-y}function noEvents(){return typeof o.ignoreEvents!=="undefined"&&o.ignoreEvents}initialBoot();
