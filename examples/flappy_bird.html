<html>
<!-- Draw a square with a random color -->

<body>
  <script>
    "use strict"
    let v = 0;
    let y = 0;
    let x = 0;
    let timer = 0;

    
    function boot() {
      [v, x, y] = [0, 0, 5]
    }

    let scenes = [
      {
        customUpdate:(c,o)=>{
          timer += 1;
          console.log("first scene")
          if(timer >= 10)
          {
            console.log("Changing scene")
            o.changeScene(1)
          }
        },
        customUI:(c,o)=>{
          let t = "Welcome to this Game"
          c.fi("Green").fo("40px Arial").tc(t, c.canvas.width/2, c.canvas.height/2)
        }
      },
      {
        firstUpdate(c, o){
          o.drawGrid = true;
          o.fillColor = "black"
          o.maxZoom = 50;
          o.minZoom = 20;
          o.cameraZoom = 50;
          o.disableCameraMovement = true;
          o.zoom(10).lookAt(0, 5);
          boot();
          this.pipes = []
          this.lastPipeTime = 2
          this.timeBetweenPipes = 2;
          this.pipeSpawnX = 2

        },
        customUpdate(c, o) {
          v -= 9.8 * o.time;
          i.down(" ", () => v = 5)
          y += v * o.time;
          x += o.time;
          o.lookAt(x, 5);

          if (y < 0) {
            //You hit the ground
            boot()
          }
          this.lastPipeTime += o.secondsBetweenFrames
          if(this.lastPipeTime >= this.timeBetweenPipes){
            this.lastPipeTime -= this.timeBetweenPipes;
            this.pipes.push({
              x : this.pipeSpawnX + x,
            })
          }

        },
        customDraw(c, o) {
          c.fi("green").b().circle(x, y, .2).f()
          for(let pipe of this.pipes){
            c.fi("green").fillRect(pipe.x, 5, 1, 5)
          }
        }
      }
    ]

    

    function firstUpdate(c, o) {
      o.scenes = scenes
    }

  </script>
  <script src="canvas.js"></script>

</body>

</html>